<%# This is the Query Directory page. -%>
<%# http://localhost:3000/queries/query_directory -%>

<h1>Query Directory Page</h1>
<%#= debug @results%>

<div class="row">
	<div class="col-md-6 text-center">
		<i class="fa fa-building fa-3x"></i>
		<p class="query_descriptor text-left">Which financial institutions are the least consumer friendly?  To provide you with a list of the least consumer-friendly companies, we've ranked all of them by their monthly complaint averages.</p>
		<div class="btn btn-primary d-block d-md-none">
			<%= link_to "Company Rankings", 'complaint_rankings', id: 'btn_link' %>
		</div>
	</div>
	<div class="col-md-6 text-center">
		<i class="fa fa-credit-card fa-3x"></i>
		<p class="query_descriptor text-left">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum ornare nisi vitae sem sodales, id dictum libero pharetra. Donec id.</p>
		<div class="btn btn-primary d-block d-md-none">
			<%= link_to "Product Rankings", 'product_rankings', id: 'btn_link' %>
		</div>
	</div>
</div>
<div class="d-none d-md-block">
	<div class="row button_row">
		<div class="col-md-6 text-center">
			<div class="btn btn-primary">
				<%= link_to "Company Rankings", 'complaint_rankings', id: 'btn_link' %>
			</div>
		</div>
		<div class="col-md-6 text-center">
			<div class="btn btn-primary">
				<%= link_to "Product Rankings", 'product_rankings', id: 'btn_link' %>
			</div>
		</div>
	</div>
</div>
<div class="row">
	<div class="col-md-6 text-center">
		<i class="fa fa-clock-o fa-3x"></i>
		<p class="query_descriptor text-left">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum ornare nisi vitae sem sodales, id dictum libero pharetra. Donec id.</p>
		<div class="btn btn-primary d-block d-md-none">
			<%= link_to "Timeliness Rankings", 'timeliness_rankings', id: 'btn_link' %>
		</div>
	</div>
	<div class="col-md-6 text-center">
		<i class="fa fa-frown-o fa-3x"></i>
		<p class="query_descriptor text-left">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum ornare nisi vitae sem sodales, id dictum libero pharetra. Donec id.</p>
		<div class="btn btn-primary d-block d-md-none">
			<%= link_to "Dispute Rankings", 'dispute_rankings', id: 'btn_link' %>
		</div>
	</div>
</div>
<div class="d-none d-md-block">
	<div class="row button_row">
		<div class="col-md-6 text-center">
			<div class="btn btn-primary">
				<%= link_to "Timeliness Rankings", 'timeliness_rankings', id: 'btn_link' %>
			</div>
		</div>
		<div class="col-md-6 text-center">
			<div class="btn btn-primary">
				<%= link_to "Dispute Rankings", 'dispute_rankings', id: 'btn_link' %>
			</div>
		</div>
	</div>
</div>


<%# Custom User Search goes in this div -%>
<div id = "custom_search" class="container">

	<p class="text-center">
		<i class="fa fa-gears fa-3x"></i><br>
		Looking for something specific? Use the filters below to generate customized results!<br>
	</p>
	<p class="tip_head">Tips for usage:</p>
		<ul class="tips">
			<li>Select companies or products and services you'd like to compare.</li>
			<li>Selecting only companies will return a ranking of the selected companies.</li>
			<li>Selecting only products and services will return a ranking of the selected products and services.</li>
			<li>Selecting both companies and products/services will return a ranking of chosen companies based on the specified product types. Note that, if a selected company doesn't provide a particular service, this may return zero results. For example, a credit reporting company probably hasn't received any complaints about virtual currency.</li>
			<li>Results can be narrowed down by demographic, date range, submission method, or state.  Note that applying too many filters can lead to few, or zero, results.</li>
		</ul>
	<div class="container">
		<p class="filter_name text-center">Select Categories of Interest</p>
		<%= form_tag '/queries/custom_search', method: :get do %>
		<div class ="row">
			<div class="col-md-4 field form-group">
				<div class="form_category">Product/Service Type:
					<span class="tooltiptext">Leave unchecked to view all results.
					</span>
				</div>
				<div class="checkbox">
					<%= check_box_tag "type[#{1}]", true, @tags %>
					<%= label_tag "type[#{1}]", "Banking"%>
				</div>
				<div class="checkbox">
					<%= check_box_tag "type[#{2}]", true, @tags %>
					<%= label_tag "type[#{2}]", "Consumer Loan"%>
				</div>
				<div class="checkbox">
					<%= check_box_tag "type[#{3}]", true, @tags %>
					<%= label_tag "type[#{3}]", "Credit Card"%>
				</div>
				<div class="checkbox">
					<%= check_box_tag "type[#{4}]", true, @tags %>
					<%= label_tag "type[#{4}]", "Credit Reporting"%>
				</div>
				<div class="checkbox">
					<%= check_box_tag "type[#{5}]", true, @tags %>
					<%= label_tag "type[#{5}]", "Debt Collection"%>
				</div>
				<div class="checkbox">
					<%= check_box_tag "type[#{6}]", true, @tags %>
					<%= label_tag "type[#{6}]", "Money Transfer"%>
				</div>
				<div class="checkbox">
					<%= check_box_tag "type[#{7}]", true, @tags %>
					<%= label_tag "type[#{7}]", "Mortgage"%>
				</div>
				<div class="checkbox">
					<%= check_box_tag "type[#{8}]", true, @tags %>
					<%= label_tag "type[#{8}]", "Prepaid Card"%>
				</div>
				<div class="checkbox">
					<%= check_box_tag "type[#{9}]", true, @tags %>
					<%= label_tag "type[#{9}]", "Student Loan"%>
				</div>
				<div class="checkbox">
					<%= check_box_tag "type[#{10}]", true, @tags %>
					<%= label_tag "type[#{10}]", "Virtual Currency"%>
				</div>
				<div class="checkbox">
					<%= check_box_tag "type[#{11}]", true, @tags %>
					<%= label_tag "type[#{11}]", "Other"%>
				</div>
			</div>
			<div class="col-md-8 field form-group">
				<div class="form_category text-center">Company Selection:
					<span id="company_tooltip" class="tooltiptext">Hint: Use Ctrl+F to search for companies.
					</span>
				</div>
				<div class="scroll_container">
					<% @names.each_with_index do |n, index| %>
						<% n.each do |value| %>
							<%#= index %>
							<%#= value[1] %>
							<div class="checkbox-inline">
								<%= check_box_tag "cname[#{index}]", true, @tags, class: 'align_check' %>
								<%= label_tag "cname[#{index}]", value[1], class: 'align_name' %>
							</div>
						<% end %>
					<% end %>
				</div>
			</div>
		</div>
		<p class="filter_name text-center">Additional Filters</p>
		<div class="row">
			<div class="col-md-4 field form-group">
				<div class="field form-group">
					<div class="form_category">Complaint Submission Method:
						<span class="tooltiptext">Leave unchecked to view all results.
						</span>
					</div>
					<div class="checkbox">
						<%= check_box_tag "sub[#{1}]", true, @tags %>
						<%= label_tag "sub[#{1}]", "E-mail"%>
					</div>
					<div class="checkbox">
						<%= check_box_tag "sub[#{2}]", true, @tags %>
						<%= label_tag "sub[#{2}]", "Fax"%>
					</div>
					<div class="checkbox">
						<%= check_box_tag "sub[#{3}]", true, @tags %>
						<%= label_tag "sub[#{3}]", "Phone"%>
					</div>
					<div class="checkbox">
						<%= check_box_tag "sub[#{4}]", true, @tags %>
						<%= label_tag "sub[#{4}]", "Postal Mail"%>
					</div>
					<div class="checkbox">
						<%= check_box_tag "sub[#{5}]", true, @tags %>
						<%= label_tag "sub[#{5}]", "Referral"%>
					</div>
					<div class="checkbox">
						<%= check_box_tag "sub[#{6}]", true, @tags %>
						<%= label_tag "sub[#{6}]", "Web"%>
					</div>
				</div>
			</div>
			<div class="col-md-4 field form-group">
				<div class="field form-group">
					<div class="form_category">Demographic:
						<span class="tooltiptext">Leave unchecked to view all results.
						</span>
					</div>
					<div class="radio">
						<%= radio_button_tag :"demo[#{1}]", 1 %>
						<%= label_tag :"demo[#{1}]", "Older American"%>
					</div>
					<div class="radio">
						<%= radio_button_tag :"demo[#{1}]", 2 %>
						<%= label_tag :"demo[#{1}]", "Not Older American"%>
					</div>
					<div class="radio">
						<%= radio_button_tag :"demo[#{2}]", 1 %>
						<%= label_tag :"demo[#{2}]", "Service Member"%>
					</div>
					<div class="radio">
						<%= radio_button_tag :"demo[#{2}]", 2 %>
						<%= label_tag :"demo[#{2}]", "Not Service Member"%>
					</div>
					<div class="checkbox-inline">
						<%= check_box_tag "demo[#{3}]", true, @tags, class: 'align_check' %>
						<%= label_tag "demo[#{3}]", "All Other Demographics", class: 'align_name demo_name' %>
					</div>
				</div>
			</div>
			<div class="col-md-4 field form-group">
				<div class="form_category">State Selection:
					<span class="tooltiptext">Leave unchecked to view all results.
					</span>
				</div>
				<div class="scroll_container state_container">
					<% @State_list.each do |key, value| %>
						<%#= index %>
						<%#= value[1] %>
						<div class="checkbox-inline">
							<%= check_box_tag "state[#{key}]", true, @tags, class: 'align_check' %>
							<%= label_tag "state[#{key}]", "#{key}", class: 'align_name' %>
						</div>
					<% end %>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-md-4 field form-group">
				<div class="form_category">Select Date Range:
					<span class="tooltiptext">Default shows all results.
					</span>
				</div>
				<div class="form-group calendar">
				  	<%= text_field_tag("start_date", "", :readonly => true) %>
					<%= label_tag "start_date", "Start Date"%>
					<%= text_field_tag("end_date", "", :readonly => true) %>
					<%= label_tag "end_date", "End Date"%>
				</div>
			</div>
		</div>
		<div class="col-12 text-center">
			<%= submit_tag 'Get Results', class: 'btn btn-primary btn_bottom', id: 'btn_link'  %>
		</div>
		<% end %>
	</div>
</div>